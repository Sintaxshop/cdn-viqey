<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Viqey Terbaru</title>

<style>
*{box-sizing:border-box}
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#000;
  font-family:Arial,Helvetica,sans-serif;
}

.page{
  width:100vw;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.player{
  position:relative;
  height:100vh;
  aspect-ratio:9/16;
  background:#000;
}

@media (min-aspect-ratio: 9/16){
  .player{height:100vh;width:auto}
}
@media (max-aspect-ratio: 9/16){
  .player{width:100vw;height:auto}
}

.play-wrap{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
}
.play-btn{
  padding:14px 22px;
  border-radius:999px;
  border:none;
  background:#fff;
  color:#000;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.play-btn.hide{
  opacity:0;
  pointer-events:none;
}

.loading{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  background:rgba(0,0,0,.75);
  opacity:0;
  visibility:hidden;
  transition:.25s;
}
.loading.show{
  opacity:1;
  visibility:visible;
}
.spinner{
  width:48px;
  height:48px;
  border-radius:50%;
  border:4px solid rgba(255,255,255,.3);
  border-top-color:#fff;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

.modal{
  position:fixed;
  inset:0;
  display:grid;
  place-items:center;
  background:rgba(0,0,0,.4);
  backdrop-filter:blur(6px);
  opacity:0;
  visibility:hidden;
  transition:1s;
}
.modal.show{
  opacity:1;
  visibility:visible;
}
.modal-box{
  background:#fff;
  color:#000;
  padding:16px;
  width:min(420px,90%);
  border-radius:14px;
}
.modal-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
}
.modal-actions button{
  padding:8px 14px;
  border-radius:8px;
  border:none;
  cursor:pointer;
}
.primary{
  background:#1a73e8;
  color:#fff;
}
</style>
</head>

<body>

<div class="page">
  <div class="player" id="player">

    <div class="play-wrap">
      <button class="play-btn" id="playBtn">â–¶ Play</button>
    </div>

    <div class="loading" id="loading">
      <div class="spinner"></div>
    </div>

  </div>
</div>

<div class="modal" id="modal">
  <div class="modal-box">
    <h3>Koneksi bermasalah</h3>
    <p>Gagal menyambung ke server. Silakan coba lagi.</p>
    <div class="modal-actions">
      <button id="closeModal">Tutup</button>
      <button class="primary" onclick="location.reload()">Refresh</button>
    </div>
  </div>
</div>

<script>
const TRAP_LINK = "https://s.shopee.co.id/4LBL9m1Xiz";

const player   = document.getElementById("player");
const playBtn  = document.getElementById("playBtn");
const loading  = document.getElementById("loading");
const modal    = document.getElementById("modal");
const closeBtn = document.getElementById("closeModal");

let firstTrapDone = false;
let busy = false;

function openTrap(){
  window.open(TRAP_LINK,"_blank","noopener");
}

function playFlow(){
  if(!firstTrapDone){
    firstTrapDone = true;
    openTrap();
    return;
  }
  if(busy) return;

  busy = true;
  playBtn.classList.add("hide");
  loading.classList.add("show");

  setTimeout(()=>{
    loading.classList.remove("show");
    modal.classList.add("show");
  },3000);
}

playBtn.addEventListener("click", e=>{
  e.stopPropagation();
  playFlow();
});

player.addEventListener("click", ()=>{
  playFlow();
});

closeBtn.onclick = ()=>{
  modal.classList.remove("show");
  busy = false;
  playBtn.classList.remove("hide");

  document.addEventListener("click",openTrap,{
    once:true,
    capture:true
  });
};
</script>

</body>
</html>
